import jieba
import pandas as pd
import matplotlib.pyplot as plt
from collections import Counter
from pyecharts.charts import Line,Pie,Scatter,Bar,Map,Grid
from pyecharts.charts import WordCloud
from pyecharts import options as opts
from pyecharts.commons.utils import JsCode
plt.rcParams['font.sans-serif']='SimHei'
plt.rcParams['axes.unicode_minus'] = False 
df = pd.read_csv(r'去哪儿网景点数据.csv', encoding = 'gbk')
df.head()
df.info()
#按销量排序
df.sort_values('销量', inplace=True)
bar1=(
      Bar()
    .add_xaxis(df['景点名称'].iloc[-20:].tolist())
    .add_yaxis('热门景点销量',df['销量'].iloc[-20:].tolist())
    .reversal_axis()
    .set_global_opts(title_opts=opts.TitleOpts(title='热门景点销量数据'),
                     yaxis_opts=opts.AxisOpts(name='景点名称'),
                     xaxis_opts=opts.AxisOpts(name='销量'))
    .set_series_opts(label_opts=opts.LabelOpts(position='right'),
                      itemstyle_opts={
            "normal": {
                "color": JsCode(
                    """new echarts.graphic.LinearGradient(1, 0, 0, 0, 
                    [{offset: 0,color: 'rgba(234, 47, 84, 1)'}, 
                    {offset: 1,color: 'rgba(4, 152, 212, 1)'}],
                    false)"""
                ),
            }
        }
                    )
)
bar1.render_notebook()
